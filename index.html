ve<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Grammar Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Tailwind Stone) with Teal accent -->
    <!-- Application Structure Plan: The application now features a "Home Page" as its initial view, presenting a grid of buttons. Each button represents a distinct quiz set, dynamically generated from a central data structure. Clicking a button transitions to the "Quiz Container" view, which maintains the single-question-at-a-time focus, progress tracking, and immediate feedback. Upon quiz completion, the "Results Container" is shown. Navigation between these views is handled via dedicated buttons (e.g., "Back to Home", "Restart Quiz"). This structure provides a clear entry point for users to select their desired quiz content and enhances the application's scalability for future quiz additions. -->
    <!-- Visualization & Content Choices: The Home Page uses a simple grid of styled HTML buttons to allow selection of quiz sets (Goal: Organize/Navigate, Interaction: Click). Questions are presented as text with clickable buttons for options (Goal: Test Knowledge, Interaction: Click). Feedback is a dynamic text block (Goal: Inform, Interaction: Appears on click). Final score is visualized with a Chart.js Donut Chart (Goal: Compare/Summarize, Viz: Donut Chart) showing correct vs. incorrect answers for a quick, impactful summary of performance. All diagrams/visuals are HTML/CSS/Canvas based, adhering to the NO SVG/Mermaid constraint. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 280px;
            margin-left: auto;
            margin-right: auto;
            height: 280px;
            max-height: 280px;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto">
        
        <div id="home-page-container" class="bg-white p-6 sm:p-8 rounded-xl shadow-lg transition-opacity duration-500">
            <h2 class="text-2xl sm:text-3xl font-bold text-stone-800 mb-6 text-center">Select a Quiz Set</h2>
            <div id="quiz-set-buttons" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <!-- Quiz set buttons will be dynamically inserted here -->
            </div>
        </div>

        <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-xl shadow-lg transition-opacity duration-500 hidden">
            <header class="mb-6">
                <div class="flex justify-between items-center mb-2 text-sm text-stone-500">
                    <span>Progress</span>
                    <span id="progress-text">Question 1 / 20</span>
                </div>
                <div class="w-full bg-stone-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-teal-500 h-2.5 rounded-full transition-all duration-500" style="width: 5%"></div>
                </div>
            </header>

            <main>
                <h2 id="question-text" class="text-xl sm:text-2xl font-semibold mb-6 h-24 sm:h-16"></h2>
                <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                </div>
            </main>

            <div id="feedback-container" class="mt-6 p-4 rounded-lg bg-stone-100 border border-stone-200 hidden">
                <h3 id="feedback-title" class="font-bold text-lg mb-2"></h3>
                <p id="feedback-explanation" class="text-stone-600 mb-2"></p>
                <p id="feedback-justification" class="text-sm text-stone-500"></p>
            </div>

            <footer class="mt-8 flex justify-between items-center">
                <button id="back-to-home-button" class="px-4 py-2 bg-stone-200 text-stone-700 font-semibold rounded-lg shadow-md hover:bg-stone-300 focus:outline-none focus:ring-2 focus:ring-stone-400 focus:ring-opacity-75 transition-colors">
                    Back to Home
                </button>
                <button id="next-button" class="px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg shadow-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-75 disabled:bg-stone-300 disabled:cursor-not-allowed transition-colors">
                    Next
                </button>
            </footer>
        </div>

        <div id="results-container" class="bg-white p-6 sm:p-8 rounded-xl shadow-lg text-center transition-opacity duration-500 hidden">
            <h2 class="text-2xl sm:text-3xl font-bold text-stone-800 mb-2">Quiz Completed!</h2>
            <p class="text-stone-600 mb-6">Here's how you did.</p>
            
            <div class="chart-container mb-6">
                <canvas id="results-chart"></canvas>
            </div>
            
            <p id="score-text" class="text-xl font-semibold mb-8"></p>

            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button id="restart-button" class="w-full sm:w-auto px-8 py-3 bg-teal-600 text-white font-semibold rounded-lg shadow-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-75 transition-colors">
                    Restart Quiz
                </button>
            </div>
        </div>

    </div>

    <script>
const quizData = [
    // Set 0: Teaching and Education (Original)
    [
        {
            question: "The teacher praised her students’ __________ during the rehearsal.",
            options: ["attentive", "attention", "attentively", "attend"],
            correct: 1,
            explanation: "“Attention” is the noun meaning 'focused mental effort' or 'concentration' (Thai: ความเอาใจใส่).",
            justification: "“Attentive” (adjective): describes someone who pays attention (Thai: ใส่ใจ) – wrong part of speech.<br>“Attentively” (adverb): describes how an action is done (Thai: อย่างตั้งใจ) – wrong part of speech.<br>“Attend” (verb): to go to or to be present (Thai: เข้าเรียน/เข้าร่วม) – wrong meaning."
        },
        {
            question: "After the presentation, there was a lively __________ about the main points.",
            options: ["discuss", "discussion", "discussive", "discussed"],
            correct: 1,
            explanation: "“Discussion” is the noun meaning a conversation or debate (Thai: การอภิปราย).",
            justification: "“Discuss” (verb): to talk about (Thai: พูดคุยเกี่ยวกับ) – wrong part of speech.<br>“Discussive” (adjective): relating to discussion (Thai: เกี่ยวกับการอภิปราย) – rare, wrong part of speech.<br>“Discussed” (past participle): talked about (Thai: ได้ถูกกล่าวถึง) – wrong form."
        },
    ]
];

        let currentQuizSetIndex = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let chartInstance = null;

        const homePageContainer = document.getElementById('home-page-container');
        const quizSetButtonsContainer = document.getElementById('quiz-set-buttons');
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');

        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const feedbackContainerEl = document.getElementById('feedback-container');
        const feedbackTitleEl = document.getElementById('feedback-title');
        const feedbackExplanationEl = document.getElementById('feedback-explanation');
        const feedbackJustificationEl = document.getElementById('feedback-justification');
        const nextButton = document.getElementById('next-button');
        const backToHomeButton = document.getElementById('back-to-home-button');
        const progressTextEl = document.getElementById('progress-text');
        const progressBarEl = document.getElementById('progress-bar');
        const scoreTextEl = document.getElementById('score-text');
        const restartButton = document.getElementById('restart-button');

        function showHomePage() {
            homePageContainer.classList.remove('hidden');
            quizContainer.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            renderQuizSetButtons();
        }

        function renderQuizSetButtons() {
            quizSetButtonsContainer.innerHTML = '';
            quizSets.forEach((set, index) => {
                const button = document.createElement('button');
                button.textContent = `Quiz Set ${index + 1}`;
                button.classList.add('w-full', 'p-6', 'bg-teal-500', 'text-white', 'font-semibold', 'rounded-lg', 'shadow-md', 'hover:bg-teal-600', 'focus:outline-none', 'focus:ring-2', 'focus:ring-teal-500', 'focus:ring-opacity-75', 'transition-colors', 'text-lg');
                button.addEventListener('click', () => startQuiz(index));
                quizSetButtonsContainer.appendChild(button);
            });
        }

        function startQuiz(setIndex) {
            currentQuizSetIndex = setIndex;
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(quizSets[currentQuizSetIndex].length).fill(null);
            
            homePageContainer.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = quizSets[currentQuizSetIndex][currentQuestionIndex];
            questionTextEl.textContent = currentQuestion.question.replace('________', '________');
            
            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('w-full', 'p-4', 'border-2', 'border-stone-300', 'rounded-lg', 'text-left', 'hover:bg-stone-100', 'hover:border-teal-400', 'transition-colors', 'duration-200', 'focus:outline-none', 'focus:ring-2', 'focus:ring-teal-500');
                button.dataset.index = index;
                button.addEventListener('click', () => selectAnswer(index));
                optionsContainerEl.appendChild(button);
            });

            updateProgress();
        }

        function resetState() {
            optionsContainerEl.innerHTML = '';
            feedbackContainerEl.classList.add('hidden');
            nextButton.disabled = true;
        }

        function selectAnswer(selectedIndex) {
            const currentQuestion = quizSets[currentQuizSetIndex][currentQuestionIndex];
            const isCorrect = selectedIndex === currentQuestion.correct;
            userAnswers[currentQuestionIndex] = selectedIndex;

            if (isCorrect) {
                score++;
                feedbackTitleEl.textContent = 'Correct!';
                feedbackTitleEl.classList.remove('text-red-600');
                feedbackTitleEl.classList.add('text-green-600');
            } else {
                feedbackTitleEl.textContent = 'Incorrect';
                feedbackTitleEl.classList.remove('text-green-600');
                feedbackTitleEl.classList.add('text-red-600');
            }

            feedbackExplanationEl.textContent = currentQuestion.explanation;
            feedbackJustificationEl.textContent = `Justification: ${currentQuestion.justification}`;
            feedbackContainerEl.classList.remove('hidden');

            Array.from(optionsContainerEl.children).forEach(button => {
                button.disabled = true;
                const buttonIndex = parseInt(button.dataset.index);

                if (buttonIndex === currentQuestion.correct) {
                    button.classList.remove('border-stone-300', 'hover:bg-stone-100');
                    button.classList.add('bg-green-100', 'border-green-500', 'font-semibold');
                } else if (buttonIndex === selectedIndex) {
                    button.classList.remove('border-stone-300', 'hover:bg-stone-100');
                    button.classList.add('bg-red-100', 'border-red-500');
                }
            });

            nextButton.disabled = false;
        }

        function updateProgress() {
            const totalQuestionsInSet = quizSets[currentQuizSetIndex].length;
            const progressPercentage = ((currentQuestionIndex + 1) / totalQuestionsInSet) * 100;
            progressTextEl.textContent = `Question ${currentQuestionIndex + 1} / ${totalQuestionsInSet}`;
            progressBarEl.style.width = `${progressPercentage}%`;
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            scoreTextEl.textContent = `You scored ${score} out of ${quizSets[currentQuizSetIndex].length}.`;
            renderResultsChart();
        }
        
        function renderResultsChart() {
            const ctx = document.getElementById('results-chart').getContext('2d');
            if (chartInstance) {
                chartInstance.destroy();
            }
            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Correct', 'Incorrect'],
                    datasets: [{
                        data: [score, quizSets[currentQuizSetIndex].length - score],
                        backgroundColor: ['#14b8a6', '#fca5a5'],
                        borderColor: ['#0f766e', '#ef4444'],
                        borderWidth: 2,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            enabled: true
                        }
                    }
                }
            });
        }

        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizSets[currentQuizSetIndex].length) {
                showQuestion();
            } else {
                showResults();
            }
        });

        backToHomeButton.addEventListener('click', showHomePage);
        restartButton.addEventListener('click', showHomePage);

        document.addEventListener('DOMContentLoaded', showHomePage);
    </script>
</body>
</html>
